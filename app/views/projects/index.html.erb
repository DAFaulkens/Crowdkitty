
<div class="search-container">
  <%= form_tag projects_path, method: "get", class: 'projects-filter', :remote => true do %>
  <h3>Search for </h3>
  <%= text_field_tag('search', @search, class: 'projects-search', placeholder: 'search') %> show
  <div class="styled-select">
    <%= select_tag 'category_id', options_for_select(@categories.map {|c| [c.name, c.id]}.uniq.unshift(['all', 'all']), selected: @category_id) %>
  </div>
  projects in
  <div class="styled-select">
    <%#= select_tag 'loc', options_for_select(@cities.map {|city| [city, city]}.uniq.unshift(['all locations', 'all']), selected: @location) %>
  </div>

  <div id='project_locations'>
    
    <div id="location_checkbox" class="checkbox" style='display: none'>
      <%= check_box_tag 'project[location_id]', @location ? @location : 'placeholder', true %>
      <%= label_tag @location ? Location.find(@location).name : 'placeholder' %>
    </div>

    <div id="location_autocomplete"
    <% if @location %>
    style='display: none'
    <% end %>
    >
      <%= text_field_tag :location_search, '', placeholder: 'search for locations', class: 'location_search' %>
    </div>
    <div class="selected_location" id="selected_location"
    <% if @location %>
    style='display: inline'
    <% end %>
    >
    <% if @location %>
    <%= Location.find(@location).name %> <i class="fa fa-times"></i>
    <% end %>
    </div>
  </div>

  <% if @request_type %>
  <%= hidden_field_tag 'request_type', @request_type %>
  <% end %>
  <%= submit_tag "Go" %>
  <% end %><br>
</div>
<div class="current_projects">
  <% case @request_type %>
  <% when 'most_popular' %>
  <h6>Most Popular Projects</h6>
  <% when 'finishing_soon' %>
  <h6>Projects Finishing Soon</h6>
  <% else %>
  <h6>Current Projects</h6>
  <% end %><br>

  <div class="cards" id="projects">
    <%= render "projects", :projects => @projects %>
  </div>
</div>






